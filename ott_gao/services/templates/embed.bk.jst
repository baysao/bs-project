<html>
<head>
    <title>{{= it.name}}</title>
    <meta name="version" content="{{= it.vbixver}}">

    <!-- video.js START -->
    <!--<link href="/videojs/video-js.css" rel="stylesheet">-->
    <!--<script src="/videojs/video.js"></script>-->
    <!--<script src="/videojs/vjs.youtube.js"></script>-->
    <!--<script src="/videojs/vjs.novideo.js"></script>-->
    <!--<script>-->
        <!--videojs.options.flash.swf = "/videojs/video-js.swf";-->
    <!--</script>-->
    <!-- video.js END -->
    <!--<script src="/js/OVVAsset.js"></script>-->

    <!--script src="/layouts/html5/150/jquery-1.10.2.js"></script>
    <script src="/layouts/html5/150/jquery-ui-1.10.4.custom.min.js"></script-->

    <script src="/libraries/third_party/greensock/TweenLiteLightweight.min.js"></script>
    <script src="/libraries/third_party/objectpath.js"></script>
    <link href="/layouts/html5/{{= it.vbixver}}/vbxlayout.css" rel="stylesheet">
    <script src="/scripts/uuid.js" type="text/javascript"></script>
    <script src="/layouts/html5/{{= it.vbixver}}/vbxlayout.js"></script>
    <script src="/layouts/html5/{{= it.vbixver}}/commonbase.js" type="text/javascript"></script>
    <script type="text/javascript">
        theoplayer = {
            configuration: {
                libraryLocation: '/theoplayer/1572/',
                styleSheetURI: '/theoplayer/1572/theoplayer.1.5.6.css',
//                            ads: {
//                                banners: [{
//                                    imageURL: "http://creative-ads.org/wp-content/uploads/2013/04/what_a_whopper_ad.jpg",
//                                    clickURL: "http://www.theoplayer.com",
//                                    opacity: 0.6,
//                                    startTime: 5,
//                                    endTime: 25,
//                                    maxHeight: '13%',
//                                    closable: true
//                                }]
//                            }
            }
        }
        function getJSON(url) {
            return new Promise(function(resolve, reject) {
                var xhr = new XMLHttpRequest();
                xhr.open('get', url, true);
                xhr.responseType = 'json';
                xhr.onload = function() {
                    var status = xhr.status;
                    if (status == 200) {
                        resolve(xhr.response);
                    } else {
                        reject(status);
                    }
                };
                xhr.send();
            });
        };
        function loadScript(url, callback) {
            var fileref;
            if (/\.js$/.test(url)) {
                fileref = document.createElement("script");
                fileref.setAttribute("type", "text/javascript");
                fileref.setAttribute("src", url);
            } else if (/\.css$/.test(url)) {
                fileref = document.createElement("link");
                fileref.setAttribute("rel", "stylesheet");
                fileref.setAttribute("type", "text/css");
                fileref.setAttribute("href", url);
            }
            if (typeof fileref != "undefined") {
                if (fileref.readyState) {  /*IE*/
                    fileref.onreadystatechange = function () {
                        if (fileref.readyState == "loaded" || fileref.readyState == "complete") {
                            fileref.onreadystatechange = null;
                            callback();
                        }
                    };
                } else {  /*Others*/
                    fileref.onload = function () {
                        callback();
                    };
                }
                document.getElementsByTagName("head")[0].appendChild(fileref);
            } else {
                callback();
            }
        }
        ;

        padding = {top: 5, right: 5, bottom: 5, left: 5};
        titleBarHeight = 39;
        bottomLogoPadding = {top: 5, right: 5, bottom: 5, left: 5};
        edgeToEdge = false;
        animateTitle = false;
        videoControlsBelow = true;
        menuPeek = true;
        menuItemHeight = 30;
        menuItemHeightTouch = 60;
        menuItemBottomMargin = 1;

        VBX.Layout.init({
//            video: {id: 'video1', platform: VBX.Layout.VideoPlayerPlatform.VIDEOJS},
            video: {id: 'video1', platform: 'external'
            },
            menu: {
                id: 'menu1',
                iconSize: 32,
                overflow: 'moreApp',
                overflowFunction: showMoreApp,
                share: 'embedApp',
                shareFunction: showEmbedApp,
                addShareIfNoVideo: false
            },
            container: {
                id: 'apps1',
                closeButton: true,
                rollPrompt: 'rollPrompt',
                rollPromptFunction: showRollPrompt,
                completeAllowSkipRollApp: false,
                appCloseCallback: onAppClose,
                appIframeCreatedCallback: onAppIframeCreated
            },
            ready: viewbixOnReady
        });

        function viewbixOnReady() {
            loadScript("/theoplayer/1572/theoplayer.loader.js", function () {
                console.log('theoplayer done');
                theoplayer.onReady = function () {
//                    theoplayer.player(0).addEventListener('timeupdate', function(){
//                        console.log('timeUpdate');
//                        var currentTime = theoplayer.player(0).currentTime;
//
//                        console.log(currentTime);
//                        if(currentTime >= 10 && currentTime < 11) {
//                            console.log('open app');
//                            var appsContainer = document.querySelector('#apps1');
//                            var embedApp = document.querySelector('#embedApp');
//                            theoplayer.player(0).pause();
//                            VBX.Layout.selectContainerItem(appsContainer, embedApp);
//                            theoplayer.player(0).currentTime = theoplayer.player(0).currentTime + 1;
//                        }
//                    })
                    console.log('theoplayer ready');
                    {{= it.afterPlayerLoaded}}
                    onReady();

                    VBX.Layout.onState('has-background-image || !has-background-image', function () {
                        updateVideoSize();
                    });
                }
            })

        }
    </script>
    <link href="/layouts/html5/{{= it.vbixver}}/common.css" rel="stylesheet">
    <!--<link href="/layouts/html5/{{= it.vbixver}}/viewbix.css" rel="stylesheet">-->
    <script>
        var VBX_VERSION = "{{= it.vbixver}}";
        var VBX_LAYOUT_NAME = 'viewbix';
        var playerConfig =  {
            "videoClass":"theoplayer theo-style-1 video-js vjs-default-skin theoplayer-skin theoplayer-size-large theoplayer-dvr-now",
//                "affiliateRegex": ["greensmoke\\.co.+?\\/aff\\/(?P<ac>\\d+)\\/ad\\/(?P<aid>\\d+)", "tplclick\\?lid=\\d+&pubid=(?P<ac>.+)", "bin/.+?\\?id=(?P<ac>[^&]+)&offerid=(?P<aid>[^&]+)|bin/.+?\\?id=(?P<ac>.+?)&", "&pubid=(?P<ac>[^&]*)", "&aid=(?P<aid>[\\d\\.]+)&pid=(?P<ac>\\d+)&", "/click-(?P<ac>\\d+)-(?P<aid>[\\d\\.]+)", "shareasale\\.com[^?]*\\?(?P<query>.*)", "/t/\\d+-\\d+-(?P<ac>\\d+)-\\d+", "linkconnector\\.com[^?]*\\?(?P<query>.*)", "(?:/BI/(?P<ac>\\d+)/KBID/(?P<aid>\\d+))|(?:BI=(?P<ac>\\d+).+?KBID=(?P<aid>\\d+))"],
            "affiliateRegex": [],
            "deleted": false,
            "locked": false,
            "useYouTubeHighQuality": "false",
//                "postRollApps": "[{\"playerAppInternalId\":\"562d1802-47f5-4a8b-8fd3-449186860bc2\"}]",
            "postRollApps": "[]",
            "buttonBackgroundColor0": "3552822",
            "showQualityButton": "false",
            "postRollAppId": "",
//                "midRollApps": "[{\"playerAppInternalId\":\"bf5c23fc-9f29-4142-b798-61c5c6bbdc15\"}]",
            "midRollApps": "[]",
//                "title": "My Title",
            "title": "",
            "backToVideoText": "Back to Video",
            "ctaApps": "[]",
//                "ctaApps": "[{\"playerAppInternalId\":\"23c930fe-f9e5-4c69-a5d1-7fb4214eee1f\"}]",
            "ctaButtonBackgroundColor": "16763904",
            "openvvTrackScriptUrl": "",
            "showFacebookButton": "true",
            "customLogoUrl": "",
            "ctaAppId": "",
            "facebookSharePageUrl": "",
//                "preRollApps": "[{\"playerAppInternalId\":\"741138e7-120f-4e10-adc2-6ebb35da1dea\"}]",
            "preRollApps": "[]",
            "videoUrl": "{{= it.url}}",
//                "videoUrl": "http://cdn.theoplayer.com/video/big_buck_bunny/big_buck_bunny_metadata.m3u8",
            "bottomLogoLink": "",
            "defaultTwitterMessage": "Check out this video for {title}: {link}",
            "ctaButtonButtonTextFormatColor": "0x000000",
            "showHideUi": "",
            "showTwitterButton": "true",
//                "ctaLink": "http://www.viewbix.com",
            "ctaLink": "",
            "scaleLogoToTitleBar": "true",
            "standardTextFormatFont": "Arial",
            "videoThumbnailUrl": "{{= it.thumbnail}}",
//                "ctaText": "My Button",
            "ctaText": "",
            "tinyUrl": "",
//                "tinyUrl": "http://tinyurl.com/gpxzvhq",
//                "bannerApps": "[{\"playerAppInternalId\":\"c4080c3a-a64a-45de-89c6-8d3e78ef2f66\"}]",
            "bannerApps": "[]",
            "buttonBackgroundColor1": "3552822",
            "fbConversionPixel": "",
            "videoEmailUrl": "",
            "backgroundImage": "",
            "bottomLogoUrl": "",
            "showShareButton": "true",
            "titleTextFormatColor": "0xFFFFFF",
            "backgroundColor": "3552822",
            "playVideoInApps": "false",
            "cornerRadius": "0",
            "customLogoLink": "",
            "keepControlsVisible":"false",
            "showViewbixBranding": "false",
            "applications": [
//                    {
//                    "id": "22b82f6b-9fbf-4baf-a85b-8dd4a90ef51d",
//                    "internalId": "23c930fe-f9e5-4c69-a5d1-7fb4214eee1f",
//                    "component": "com.qoof.sdk.components.rss.RSSItem",
//                    "order": 1,
//                    "showInMenu": "true",
//                    "thumbnailWidth": "70",
//                    "label": "About",
//                    "icon": "/storage/content/icon/16/details.png",
//                    "feedXmlString": "<feed><entry><id></id><title>Title</title><content>Text</content><thumbnailUrl></thumbnailUrl><link></link><contentSnippet>Text</contentSnippet><publishedDate></publishedDate><index></index></entry></feed>"
//                }, {
//                    "id": "58a6a647-f14f-4db4-b390-f672cd6f5a93",
//                    "internalId": "c4080c3a-a64a-45de-89c6-8d3e78ef2f66",
//                    "component": "com.qoof.sdk.components.map.GoogleMap",
//                    "order": 2,
//                    "address": "New York City",
//                    "zoom": "7",
//                    "label": "Google Map",
//                    "icon": "/storage/content/icon/16/google_map.png",
//                    "showInMenu": "true",
//                    "title": "Visit us in New York"
//                }, {
//                    "id": "05aeb212-0801-4634-a197-fb5400062226",
//                    "internalId": "741138e7-120f-4e10-adc2-6ebb35da1dea",
//                    "component": "com.qoof.sdk.components.forms.MailForm",
//                    "order": 3,
//                    "pre_roll_app.prompt": "Complete form to play video",
//                    "showInMenu": "true",
//                    "from": "viewbix-lead@viewbix.com",
//                    "submitText": "Submit",
//                    "includeComments": "false",
//                    "pre_roll_app.allowSkip": "true",
//                    "instructions": "Please fill in the form below and click \"Submit\".",
//                    "emails": "viewbix-lead@viewbix.com",
//                    "success": "Thank you for contacting us.",
//                    "includeCheckbox": "false",
//                    "checkboxLabel": "Add me to list",
//                    "commentsLabel": "Comments",
//                    "label": "Mail Form",
//                    "icon": "/storage/content/icon/16/mail.png"
//                }, {
//                    "id": "49c0959e-3c03-4d2f-a3b5-4e95a30d2786",
//                    "internalId": "bf5c23fc-9f29-4142-b798-61c5c6bbdc15",
//                    "component": "com.qoof.sdk.components.contact.Skype",
//                    "order": 4,
//                    "address": "baysaost",
//                    "icon": "/storage/content/icon/16/skype.png",
//                    "showInMenu": "true",
//                    "mid_roll_app.startTime": "5",
//                    "instructions": "Click the button below to contact us through Skype.",
//                    "label": "Skype"
//                }, {
//                    "id": "556e76b0-2f09-4089-9b87-ed55eb08afd5",
//                    "internalId": "562d1802-47f5-4a8b-8fd3-449186860bc2",
//                    "component": "com.qoof.sdk.components.qr.QRCode",
//                    "order": 5,
//                    "label": "QR Code",
//                    "instructions": "Scan this code to visit our site.",
//                    "showInMenu": "true",
//                    "message": "http://www.viewbix.com",
//                    "icon": "/storage/content/icon/16/qr.png"
//                }
            ],
//                "playerId": "798d3d3f-21d9-45d3-9b7c-b564bc6bf286",
//                "memberId": "ffb8a5fd-6ea7-4ce6-bcc1-9c2b2254898d"
        };
        getPlayerConfigurations = function() {
            return playerConfig;
        }


    </script>
</head>
<body data-vbx-style-font-family="standardTextFormatFont"
      data-vbx-class="bodyClass(customLogoUrl, title, ctaText, showViewbixBranding, showFacebookButton, showTwitterButton, showShareButton, keepControlsVisible:false, backgroundImage:)">
<div id="mask">
    <div id="background" data-vbx-style-background-color="backgroundColor"
         data-vbx-style-border-radius="VBX.px(cornerRadius:8)"></div>


    <div id="title1">
        <a id="cta-button" data-vbx="ctaText" data-vbx-style-background-color="ctaButtonBackgroundColor"
           data-vbx-style-color="ctaButtonTextColor(ctaButtonBackgroundColor)"
           onclick="VBX.Layout.clickCtaButton(); return false;"></a>
        <img class="custom-logo" data-vbx-class="customLogoClass(customLogoUrl, scaleLogoToTitleBar, customLogoLink)"
             data-vbx-src="/layouts/html5/{{= it.vbixver}}/customLogoUrl" onclick="VBX.Layout.clickCustomLogo();"/>

        <div class="title" data-vbx-class="titleClass(customLogoUrl)" data-vbx="title"
             data-vbx-style-color="titleTextFormatColor" data-vbx-href="/layouts/html5/{{= it.vbixver}}/titleLink"></div>
    </div>

    <div id="video1"></div>


    <div id="bottomLogo" class="bottom-logo"
         data-vbx-class="bottomLogoClass(bottomLogoUrl, bottomLogoLink, bannerApps:)">
        <img id="bottom-logo" data-vbx-src="/layouts/html5/{{= it.vbixver}}/bottomLogoUrl"
             data-vbx-href="/layouts/html5/{{= it.vbixver}}/bottomLogoLink" onclick="VBX.Layout.clickBanner(); return false;"/>
    </div>

    <div id="viewbixBranding" class="viewbix-branding">

        <!--<a href="http://www.viewbix.com/" target="_blank">-->
            <!--<img alt="Powered by Viewbix" class="powered-by-viewbix" src="/storage/content/img/powered-by-viewbix.png"/>-->
        <!--</a>-->

    </div>

    <div id="menu1">

    </div>

    <div id="apps1" class="overlay">
        <div id="embedApp" class="vbx-app-body vbx-scrollable">
            <div id="embed-share-section">
                Share:
                <div class="share-button share-facebook" data-vbx-class="facebookButtonClass(showFacebookButton)"
                     onclick="VBX.Layout.shareFacebook(this)"></div>
                <div class="share-button share-twitter" data-vbx-class="twitterButtonClass(showTwitterButton)"
                     onclick="VBX.Layout.shareTwitter(this)"></div>
            </div>
            <div id="embed-link-section">
                Link:
                <textarea id="link-text" readonly></textarea>
                Embed:
                <textarea id="embed-text" readonly></textarea>
            </div>
        </div>
        <div id="moreApp" class="vbx-app-body vbx-scrollable">More App</div>
        <div id="rollPrompt">
            <div id="skipLink" onclick="VBX.Layout.setRollAppCompleted()"><span class="skip-link-divider">&nbsp;&nbsp;|&nbsp;&nbsp;</span><span
                    class="skip-link-text">No, thanks.</span></div>
        </div>
    </div>


    <div id="shareButtons" class="share-buttons">
        <div class="share-button share-facebook" data-vbx-class="facebookButtonClass(showFacebookButton)"
             onclick="VBX.Layout.shareFacebook(this)"></div>
        <div class="share-button share-twitter" data-vbx-class="twitterButtonClass(showTwitterButton)"
             onclick="VBX.Layout.shareTwitter(this)"></div>
        <div class="share-button share-player" data-vbx-class="shareButtonClass(showShareButton)"
             onclick="showEmbedApp(this)"></div>
        <div class="share-button fullscreen-button" onclick="VBX.Layout.toggleFullScreen()"></div>
    </div>

    <!-- Piwik -->
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u="//p.gao.easyvideo.vn/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', 1]);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <noscript><p><img src="//p.gao.easyvideo.vn/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
    <!-- End Piwik Code -->



</div>
</body>
</html>

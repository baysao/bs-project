var showTitleBar=!0,videoStarted=!1,rollPromptTimeoutId,hideRollPromptButton=null,intervalHandle,currentStage,padding={top:0,right:0,bottom:0,left:0},titleBarHeight=40,actualTitleBarHeight=0,bottomLogoPadding={top:0,right:0,bottom:0,left:0},edgeToEdge=!0,useAppsTrigger=!1,videoControlsBelow=!1,menuPeek=!1,appsTop,appsWidth,appsHeight,appIframes=[],menuItemHeight=32,menuItemHeightTouch=64,menuItemBottomMargin=3,menuItemRightMargin=0,AppAnimationDuration=.5,menuOnBottom=!1,menuSlidesDownFromCtaButton=
!1;
function setInitialMenuControlsAndTitle(){menuSlidesDownFromCtaButton&&!VBX.Layout.isState("vbx-show-cta-button")&&VBX.Layout.addStateClasses("vbx-show-cta-button");VBX.Layout.isState("touchscreen")?(document.querySelector("#menu1").style.display="block",useAppsTrigger&&(document.querySelector("#appsTrigger").style.display="block",document.querySelector("#menu1").style.display="none"),showTitleBar&&(document.querySelector("#title1").style.display="block"),VBX.Layout.isState("novideo-tech")&&hideControlsImmediate(),menuSlidesDownFromCtaButton&&
hideMenuImmediate()):VBX.Layout.isState("keep-controls-visible")?(useAppsTrigger?showAppsTrigger():menuSlidesDownFromCtaButton||showMenu(),showTitle(),menuSlidesDownFromCtaButton||setTimeout(function(){showMenuMinimized();hideControlBar()},3E3)):edgeToEdge?-1==window.location.href.indexOf("&ap=true")||VBX.Layout.isState("novideo-tech")?(hideMenuImmediate(),hideAppsTriggerImmediate(),hideControlsImmediate(),hideTitle(0)):(useAppsTrigger?(showAppsTrigger(),showControlBar(),setTimeout(function(){hideControlBar();
hideTitle(.5)},3E3)):menuSlidesDownFromCtaButton?(hideMenuImmediate(),showControlBar(),setTimeout(function(){hideControlBar();hideTitle(.5)},3E3)):(showMenuAndControlBar(),setTimeout(function(){hideMenuAndControlBar();hideTitle(.5)},3E3)),showTitle()):(showTitle(),showMenuAndControlBar())}
function createAppCloseButtonTouchTrappers(){if(VBX.Layout.isState("touchscreen")&&!VBX.Layout.isState("iphone"))for(var a=document.querySelectorAll(".vbx-app"),b=0;b<a.length;b++){var c=document.createElement("div");c.className="vbx-close-button-touch-trapper";a[b].appendChild(c)}}
function onReady(){fixControlsOrder();videoControlsBelow&&VBX.addClass(document.body,"video-controls-below");var a=document.querySelector("#apps1 .vbx-close-button");null!=a&&(hideRollPromptButton=a.cloneNode(!0),VBX.removeClass(hideRollPromptButton,"vbx-close-button"),VBX.addClass(hideRollPromptButton,"vbx-hide-roll-prompt-button"),document.querySelector("#apps1 .vbx-close-button").parentNode.appendChild(hideRollPromptButton));createAppCloseButtonTouchTrappers();controlsExist()&&(a=document.querySelector("#shareButtons"),
document.querySelector("#video1 .vjs-control-bar").appendChild(a));var a=document.querySelector("#apps1"),b=document.querySelector("#embedApp"),c=document.querySelector("#moreApp");VBX.Layout.appendContainerItem(a,b);VBX.Layout.appendContainerItem(a,c);setInitialMenuControlsAndTitle();VBX.listen(document.querySelector("#video1"),["click"],function(a){VBX.Layout.isState("kaltura")&&(VBX.Layout.isState("video-playing")?VBX.Layout.pauseVideo():VBX.Layout.playVideo());initTimer()},!0);menuSlidesDownFromCtaButton&&
VBX.listen(document.querySelector("#cta-button"),["click"],function(a){initTimer()},!0);null!=hideRollPromptButton&&VBX.listen(hideRollPromptButton,"click",function(a){hideRollPrompt()});VBX.listen(document.querySelector("#mask"),"resize",function(a){updateVideoSize();updateMenu();updateCustomLogoSize();menuSlidesDownFromCtaButton&&updateCtaButtonMenuContainer()});controlsExist()&&!menuOnBottom&&VBX.listen(document.querySelector("#video1 .vjs-control-bar"),"resize",function(a){updateMenu()});menuOnBottom||
VBX.listen(document.querySelector("#title1"),"resize",function(a){updateMenu()});VBX.listen(document.querySelector("#cta-button"),"resize",function(a){updateCustomLogoSize()});VBX.listen(document.querySelector("#menu1"),"resize",function(a){VBX.Layout.isState("mouseout || apps1-item-selected")&&(hideMenuImmediate(),updateMenu())});VBX.listen(document.querySelector("#bottomLogo"),"resize",function(a){updateVideoSize();updateMenu()});VBX.listen(document.querySelector("#viewbixBranding"),"resize",function(a){updateVideoSize()});
VBX.Layout.listen("customLogoUrl",function(a){updateActualTitleBarHeight()});VBX.Layout.listen("title",function(a){updateActualTitleBarHeight()});VBX.Layout.listen("ctaText",function(a){updateActualTitleBarHeight()});VBX.Layout.listen("bottomLogoUrl",function(a){updateVideoSize();updateMenu()});menuSlidesDownFromCtaButton&&(VBX.Layout.addStateClasses("ctamouseout"),VBX.Layout.addStateClasses("menumouseout"),a=document.querySelector("#cta-button"),VBX.Layout.isState("touchscreen")?VBX.listen(a,"click",
function(){VBX.Layout.isState("ctamouseout")?VBX.Layout.removeAddStateClasses("ctamouseout","ctamouseover"):VBX.Layout.removeAddStateClasses("ctamouseover","ctamouseout")}):(VBX.listenMouseEnter(a,function(a){VBX.Layout.removeAddStateClasses("ctamouseout","ctamouseover")},!1,this),VBX.listenMouseLeave(a,function(a){VBX.Layout.removeAddStateClasses("ctamouseover","ctamouseout")},!1,this),a=document.querySelector("#menu1"),VBX.listenMouseEnter(a,function(a){VBX.Layout.removeAddStateClasses("menumouseout",
"menumouseover")},!1,this),VBX.listenMouseLeave(a,function(a){VBX.Layout.removeAddStateClasses("menumouseover","menumouseout")},!1,this)));VBX.Layout.onState("ui-show",function(){document.querySelector("#title1").style.display="inherit";document.querySelector("#menu1").style.display="inherit";updateToolTip()});VBX.Layout.onState("ui-hide",function(){document.querySelector("#title1").style.display="none";document.querySelector("#menu1").style.display="none"});VBX.Layout.onState("((mouseover && !mousestill) || iphone) && !apps1-item-selected",
function(){useAppsTrigger?(showAppsTrigger(),showControlBar()):showMenuAndControlBar()});if(menuSlidesDownFromCtaButton)VBX.Layout.onState("(ctamouseover || menumouseover) && !apps1-item-selected",function(){showMenu()});VBX.Layout.isState("vpaid-nonlinear-ad")&&showYoutubeTouchTrapper();VBX.Layout.onState("video-playing || vpaid-nonlinear-ad",function(){showYoutubeTouchTrapper()});VBX.Layout.onState("video-paused && vpaid-ad && youtube-tech",function(){hideYoutubeTouchTrapper()});VBX.Layout.onState("(mouseout) || apps1-item-selected || mousestill",
function(){useAppsTrigger?(clearTimer(),hideAppsTrigger(),hideControlBar()):menuSlidesDownFromCtaButton||(clearTimer(),hideMenuAndControlBar())});if(menuSlidesDownFromCtaButton)VBX.Layout.onState("touchscreen && apps1-item-selected",function(){VBX.Layout.removeAddStateClasses("ctamouseover","ctamouseout")});menuSlidesDownFromCtaButton&&(VBX.Layout.onState("(ctamouseout && menumouseout) || apps1-item-selected",function(){hideMenu()}),VBX.Layout.onState("(mouseout) || apps1-item-selected",function(){clearTimer();
hideMenuAndControlBar()}));VBX.Layout.onState("(mouseover && !mousestill) || apps1-item-selected",function(){showTitle()});VBX.Layout.onState("(mouseout || mousestill) && !apps1-item-selected && !keep-controls-visible",function(){hideTitle(.5)});VBX.Layout.onState("keep-controls-visible",function(){showTitle()});VBX.Layout.onState("video-ended && !apps1-item-selected && !novideo-tech",function(){useAppsTrigger?(showAppsTrigger(),showControlBar()):showMenuAndControlBar();showTitle();hideYoutubeTouchTrapper()});
VBX.Layout.onState("is-full-screen",function(){updateVideoSize()});VBX.Layout.onState("not-full-screen",function(){updateVideoSize()});VBX.Layout.onState("iphone",function(){updateVideoSize();updateMenu()});VBX.Layout.onState("mraid-ad",function(){if(useAppsTrigger){var a=document.querySelector("#appsTrigger");a.src=a.src.replace("http://","https://")}});a="#FFFFFF";b=VBX.Layout.config("ctaButtonBackgroundColor");VBX.ok(b)||(b="16763904",document.querySelector("#cta-button").style.backgroundColor=
"#FFCC00");VBX.colorIsBright(parseInt(b))&&(a="#000000");document.querySelector("#cta-button").style.color=a;menuSlidesDownFromCtaButton&&updateCtaButtonMenuContainer();showControlBar();updateVideoSize();updateMenu();initAppsTrigger()}function fixControlsOrder(){var a=document.querySelector(".vjs-volume-control"),b=document.querySelector(".vjs-mute-control"),c=document.querySelector(".vjs-current-time");null!=a&&null!=c&&null!=b&&(a.parentNode.insertBefore(a,c),a.parentNode.insertBefore(b,a))}
function onAppClose(){useAppsTrigger?(hideMenu(),hideAppsContainer()):VBX.Layout.isState("keep-controls-visible")||VBX.Layout.isState("iphone")||hideTitle(.5);initTimer()}function updateActualTitleBarHeight(){var a=VBX.Layout.config("customLogoUrl"),b=VBX.Layout.config("title"),c=VBX.Layout.config("ctaText"),a=null!=a&&""!=a.trim()||null!=b&&""!=b.trim(),c=null!=c&&""!=c.trim();actualTitleBarHeight=(showTitleBar=a||c)?titleBarHeight:padding.top;updateCustomLogoSize()}
function updateCustomLogoSize(){var a=VBX.Layout.config("customLogoUrl");if(null!=a&&""!=a.trim()){var a=VBX.Layout.config("ctaText"),a=null!=a&&""!=a.trim(),b=VBX.select("body").getSize().width,c=document.querySelector("#cta-button"),d=c.parentNode,g=d.style.display;a&&(d.style.display="block",b=Math.round(c.getBoundingClientRect().left-16),d.style.display=g);document.querySelector(".custom-logo").style.maxWidth=b+"px"}}
function bodyClass(a,b,c,d,g,e,k,h){var f={remove:"",add:""};a=null!=a&&""!=a.trim()||null!=b&&""!=b.trim();c=null!=c&&""!=c.trim();(showTitleBar=a||c)?f.remove="hide-title-bar":f.add="hide-title-bar";updateActualTitleBarHeight();VBX.toBoolean(d)?f.add+=" show-facebook-button":f.remove+=" show-facebook-button";VBX.toBoolean(g)?f.add+=" show-twitter-button":f.remove+=" show-twitter-button";VBX.toBoolean(e)?f.add+=" show-share-button":f.remove+=" show-share-button";VBX.toBoolean(k)?f.add+=" keep-controls-visible":
f.remove+=" keep-controls-visible";VBX.empty(h)?f.remove+=" has-background-image":f.add+=" has-background-image";return f}function customLogoClass(a,b,c){var d={remove:"",add:""};null!=a&&""!=a.trim()?(d.add="has-custom-logo",VBX.toBoolean(b)?d.add+=" scale-logo-to-title-bar":d.remove="scale-logo-to-title-bar",null!=c&&""!=c.trim()?d.add+=" custom-logo-clickable":d.remove+=" custom-logo-clickable"):d.remove="has-custom-logo scale-logo-to-title-bar";return d}
function titleClass(a){var b={remove:"",add:""};null!=a&&""!=a.trim()?b.add="has-custom-logo":b.remove="has-custom-logo";return b}function bottomLogoClass(a,b,c){var d={remove:"",add:""};null!=a&&""!=a.trim()?(d.add="has-bottom-logo",null!=b&&""!=b.trim()||null!=c&&0<c.length?d.add+=" banner-clickable":d.remove+=" banner-clickable"):d.remove="has-bottom-logo";return d}
function facebookButtonClass(a){var b={remove:"",add:""};VBX.toBoolean(a)?b.add="show-facebook-button":b.remove="show-facebook-button";return b}function twitterButtonClass(a){var b={remove:"",add:""};VBX.toBoolean(a)?b.add="show-twitter-button":b.remove="show-twitter-button";return b}function shareButtonClass(a){var b={remove:"",add:""};VBX.toBoolean(a)?b.add="show-share-button":b.remove="show-share-button";return b}
function ctaButtonTextColor(a){var b="#FFFFFF";VBX.ok(a)||(a="16763904");VBX.colorIsBright(parseInt(a))&&(b="#000000");return b}
function showYoutubeTouchTrapper(){var a=document.querySelector("#youtubetouchtrapper");VBX.ok(a)||(a=document.createElement("div"),a.id="youtubetouchtrapper",a.style.display="none",videoStarted=!1);VBX.ok(a)&&(videoStarted?VBX.Layout.isState("touchscreen")&&VBX.Layout.isState("youtube-tech")&&!VBX.Layout.isState("iphone")&&(a.style.display="block",updateYoutubeTouchTrapperSize()):(videoStarted=!0,initTimer(),VBX.Layout.isState("touchscreen && !iphone")&&(document.querySelector("#video1").appendChild(a),
a.style.display="block",updateYoutubeTouchTrapperSize())))}function hideYoutubeTouchTrapper(){var a=document.querySelector("#youtubetouchtrapper");VBX.ok(a)&&(clearTimer(),a.style.display="none");videoStarted=!1}function updateYoutubeTouchTrapperSize(){var a=document.querySelector("#video1"),b=document.querySelector("#youtubetouchtrapper");VBX.ok(a)&&VBX.ok(b)&&(b.style.height=a.style.height,b.style.width=a.style.width,b.style.left="0px",b.style.top="0px")}
function hideControlBar(){if(controlsExist()&&edgeToEdge){var a=VBX.select("#video1 .vjs-control-bar"),b=VBX.select("#video1 .vjs-progress-control"),c=a.getSize().height,b=b.getSize().height,c=c+b;TweenLite.to(a.first(),.5,{bottom:-c,ease:Cubic.easeIn})}}function hideMenuAndControlBar(){hideMenu();hideControlBar()}
function showControlBar(){if(!VBX.Layout.isState("iphone")&&!VBX.Layout.isState("vpaid-ad")&&controlsExist()){var a=VBX.select("#video1 .vjs-control-bar");a.first().style.display="block";if(edgeToEdge)TweenLite.to(a.first(),.5,{bottom:0,ease:Cubic.easeOut});else{var b=a.getSize().height;a.first().style.bottom="-"+b+"px"}}}
function showMenu(){if(!(VBX.Layout.isState("ui-hide")||!useAppsTrigger&&VBX.Layout.isState("apps1-item-selected")||!useAppsTrigger&&VBX.Layout.isState("mouseout")&&!VBX.Layout.isState("video-ended"))){var a=document.querySelector("#menu1");a.style.display="block";if(useAppsTrigger)a.style.opacity=0,TweenLite.to(a,AppAnimationDuration,{right:0,left:0,ease:Cubic.easeOut,autoAlpha:1});else if(menuSlidesDownFromCtaButton){updateCtaButtonMenuContainer();var b=document.getElementById("cta-button"),c=b.offsetHeight+
b.offsetTop;a.style.width=b.offsetWidth.toString()+"px";TweenLite.to(a,.5,{top:c,ease:Cubic.easeOut})}else TweenLite.to(a,.5,{right:0,ease:Cubic.easeOut})}}function showAppsTrigger(){if(useAppsTrigger&&!VBX.Layout.isState("ui-hide")&&!VBX.Layout.isState("apps1-item-selected")&&(!VBX.Layout.isState("mouseout")||VBX.Layout.isState("video-ended"))){var a=document.querySelector("#appsTrigger");a.style.display="block";TweenLite.to(a,.5,{left:0,ease:Cubic.easeOut})}}
function showMenuMinimized(){menuSlidesDownFromCtaButton&&hideMenu();if(!VBX.Layout.isState("ui-hide")){var a=VBX.select("#menu1"),b=VBX.select("#menu1 img"),c;0!=b.length()&&(c=1==b.length()?b.getSize().width:b.getSize()[0].width,b=b.first().offsetLeft,c=Math.ceil(a.getSize().width)-Math.ceil(c+2*b)+1,TweenLite.to(a.first(),.5,{right:-c,ease:Cubic.easeIn}))}}function showMenuAndControlBar(){VBX.Layout.isState("touchscreen")?initTimer():showControlBar();menuSlidesDownFromCtaButton||showMenu()}
var lastSelectedAppElement=null,selectedAppId=null,appsContainerIsShowing=!1;
function hideAppsContainer(){if(appsContainerIsShowing&&(appsContainerIsShowing=!1,VBX.ok(lastSelectedAppElement))){var a=lastSelectedAppElement.style.display;lastSelectedAppElement.style.display="block";var b=document.querySelector("#apps1");TweenLite.to(b,AppAnimationDuration,{left:-b.clientWidth,ease:Cubic.easeIn,onComplete:function(){lastSelectedAppElement.style.display=a;lastSelectedAppElement=null}});TweenLite.to(b,AppAnimationDuration,{ease:Cubic.easeIn,autoAlpha:0})}}
function showAppsContainer(){if(!VBX.Layout.isState("ui-hide")&&!appsContainerIsShowing){appsContainerIsShowing=!0;var a=document.querySelector("#apps1");a.style.opacity=0;a.style.display="block";a.style.left="-"+a.clientWidth+"px";TweenLite.to(a,AppAnimationDuration,{left:0,ease:Cubic.easeOut});TweenLite.to(a,AppAnimationDuration,{autoAlpha:1})}}
function scrollToSelectedApp(){var a=document.querySelector(".vbx-selected");if(null==lastSelectedAppElement)lastSelectedAppElement=a;else if(a!=lastSelectedAppElement){var b=lastSelectedAppElement.style.display,c=lastSelectedAppElement.style.left;lastSelectedAppElement.style.display="block";for(var d=a;null!=(d=d.previousElementSibling)&&d!=lastSelectedAppElement;);var g=a.clientWidth;d===lastSelectedAppElement?(a.style.left=g+"px",d=-g):(a.style.left="-"+g+"px",d=g);a.style.zIndex=5;lastSelectedAppElement.style.zIndex=
4;TweenLite.to(a,AppAnimationDuration,{left:0,ease:Cubic.easeOut});TweenLite.to(lastSelectedAppElement,AppAnimationDuration,{left:d,ease:Cubic.easeOut,onComplete:function(){lastSelectedAppElement.style.display=b;lastSelectedAppElement.style.left=c;lastSelectedAppElement=a}})}}
function colorMenuButtons(){var a=document.querySelectorAll("#menu1 li"),b=VBX.Layout.config("menuButtonSelectedColor"),c=VBX.Layout.config("menuButtonColor");for(i=0;i<a.length;i++)a[i].getAttribute("data-app-id")==selectedAppId?(a[i].style.backgroundColor=VBX.colorToString(b),VBX.colorIsBright(parseInt(b))?a[i].style.color="#000000":a[i].style.color="#FFFFFF"):(a[i].style.backgroundColor=VBX.colorToString(c),VBX.colorIsBright(parseInt(c))?a[i].style.color="#000000":a[i].style.color="#FFFFFF")}
function onAppSelected(a){useAppsTrigger&&(selectedAppId=a,showAppsContainer(),scrollToSelectedApp(),1<getMenuNumApps("menu1")&&showMenu(),colorMenuButtons());if(VBX.Layout.isState("iphone")||VBX.Layout.isState("ipad"))document.querySelector("#video1 .vjs-control-bar").style.display="none"}
function showEmbedApp(a,b){if(!VBX.Layout.isState("ui-hide")){VBX.Layout.trackShare(a);var c=document.querySelector("#apps1"),d=document.querySelector("#embedApp"),g=document.querySelector("#link-text"),e=document.querySelector("#embed-text");g.textContent=VBX.Layout.getPreviewUrl();e.textContent=VBX.Layout.getEmbed();VBX.Layout.selectContainerItem(c,d);g.focus();try{g.select()}catch(k){}onAppSelected(b)}}
function showMoreApp(a){if(!VBX.Layout.isState("ui-hide")){var b=document.querySelector("#apps1"),c=document.querySelector("#moreApp");VBX.Layout.selectContainerItem(b,c);onAppSelected(a)}}function clearRollPromptTimeout(){VBX.ok(rollPromptTimeoutId)&&(clearTimeout(rollPromptTimeoutId),rollPromptTimeoutId=null)}
function hideMenuImmediate(){if(useAppsTrigger)document.querySelector("#menu1").style.left=-Math.ceil(VBX.select("#menu1").getSize().width)+1+"px",document.querySelector("#menu1").style.right=Math.ceil(VBX.select("#menu1").getSize().width)+1+"px";else if(menuSlidesDownFromCtaButton){var a=VBX.select("#menu1"),a=Math.ceil(a.getSize().height)+1,b=document.querySelector("#title1"),b=b.offsetTop+b.offsetHeight,c=document.querySelector("#cta-button"),c=c.offsetTop+c.offsetHeight;document.querySelector("#menu1").style.top=
b-c-a+"px"}else document.querySelector("#menu1").style.right=-Math.ceil(VBX.select("#menu1").getSize().width)+1+"px"}function hideAppsTriggerImmediate(){useAppsTrigger&&(document.querySelector("#appsTrigger").style.right=-Math.ceil(VBX.select("#appsTrigger").getSize().width)+1+"px")}function hideControlsImmediate(){if(controlsExist()||VBX.Layout.isState("novideo-tech"))document.querySelector("#video1 .vjs-control-bar").style.bottom=-VBX.select("#video1 .vjs-control-bar").getSize().height+"px"}
function showTitle(){!VBX.Layout.isState("ui-hide")&&showTitleBar&&(document.querySelector("#title1").style.display="block",1==VBX.select("#title1 .custom-logo.has-custom-logo.scale-logo-to-title-bar").length()||0==VBX.select("#title1 .custom-logo.has-custom-logo").length()?TweenLite.to(document.querySelector("#title1"),.5,{top:0,ease:Cubic.easeOut}):TweenLite.to(document.querySelector("#title1"),.5,{top:0,autoAlpha:1,ease:Cubic.easeOut}))}
function hideTitle(a){if(showTitleBar&&edgeToEdge){var b=VBX.select("#title1"),c=b.getSize().height,d;d=menuSlidesDownFromCtaButton?hideMenu:function(){};1==VBX.select("#title1 .custom-logo.has-custom-logo.scale-logo-to-title-bar").length()||0==VBX.select("#title1 .custom-logo.has-custom-logo").length()?TweenLite.to(b.first(),a,{top:-c,ease:Cubic.easeIn,onComplete:d}):TweenLite.to(b.first(),a,{top:-c,autoAlpha:0,ease:Cubic.easeIn,onComplete:d})}}
function showRollPrompt(){if(!VBX.Layout.isState("ui-hide")){clearRollPromptTimeout();document.querySelector("#apps1 .vbx-close-button").style.display="none";TweenLite.to(document.querySelector("#apps1 .vbx-close-button"),0,{autoAlpha:0});TweenLite.to(document.querySelector("#apps1 .vbx-hide-roll-prompt-button"),0,{autoAlpha:0});document.querySelector("#apps1 .vbx-hide-roll-prompt-button").style.display="block";TweenLite.to(document.querySelector("#apps1 .vbx-hide-roll-prompt-button"),.5,{delay:.5,
autoAlpha:1});var a=document.querySelector("#rollPrompt");a.style.display="block";TweenLite.to(a,.5,{left:0,ease:Cubic.easeOut});rollPromptTimeoutId=setTimeout(hideRollPrompt,3E3)}}
function hideRollPrompt(){clearRollPromptTimeout();document.querySelector("#apps1 .vbx-hide-roll-prompt-button").style.display="none";var a=document.querySelector("#apps1 .vbx-close-button");a.style.display="block";TweenLite.to(a,.5,{delay:.5,autoAlpha:1});a=VBX.select("body").getSize().width;TweenLite.to(document.querySelector("#rollPrompt"),.5,{left:a,ease:Cubic.easeIn})}function gotoStage1(){currentStage=1;useAppsTrigger?showAppsTrigger():showMenu();showControlBar();showTitle()}
function gotoStage2(){currentStage=2;useAppsTrigger||showMenuMinimized()}function gotoStage3(){VBX.Layout.isState("keep-controls-visible")?(hideControlBar(),menuSlidesDownFromCtaButton&&hideMenu()):(useAppsTrigger?(hideAppsTrigger(),hideControlBar()):hideMenuAndControlBar(),hideTitle(.5));clearTimer()}function clearTimer(){clearInterval(intervalHandle);intervalHandle=null}
function initTimer(){VBX.Layout.isState("touchscreen")&&!VBX.Layout.isState("iphone")&&(clearTimer(),gotoStage1(),VBX.Layout.isState("keep-controls-visible")||VBX.Layout.removeStateClasses("mouseover"),null!=intervalHandle&&clearTimer(),intervalHandle=setInterval(function(){switch(currentStage){case 1:menuSlidesDownFromCtaButton?gotoStage3():gotoStage2();break;case 2:gotoStage3()}},2E3))}
function controlsExist(){return 0<VBX.select("#video1 .vjs-control-bar").length()&&(!VBX.Layout.isState("novideo-tech")||!edgeToEdge)}function updateCtaButtonMenuContainer(a){var b=document.querySelector("#cta-button-menu-container"),c=showTitleBar?VBX.select("#title1").getSize().height+10:10,d=controlsExist()?VBX.select("#video1 .vjs-control-bar").getSize().height:0,g=VBX.select("#video1").getSize().height;b.style.height=VBX.ok(a)?a+"px":g-c-d-10+"px"}
function updateToolTip(){for(var a=Math.floor(.75*(VBX.select("#video1").getSize().width-VBX.select("#cta-button").getSize().width)),b=document.querySelectorAll(".tooltip"),c=0;c<b.length;c++)b[c].style.width=a+"px"}
function updateMenu(){if(menuOnBottom){var a=VBX.select("#video1").getSize().width;document.querySelector("#menu1").style.width=a;var b=document.querySelector("#bottomLogo img").offsetHeight;document.querySelector("#menu1").style.bottom=b+"px";b=VBX.Layout.getMenuWidestItemWidth("menu1");b=Math.max(1,Math.floor(a/b));VBX.Layout.setMenuMaxItems("menu1",b);colorMenuButtons();VBX.Layout.isState("apps1-item-selected")||hideMenu()}else{var b=VBX.Layout.isState("touchscreen")?menuItemHeightTouch+menuItemBottomMargin:
menuItemHeight+menuItemBottomMargin,a=showTitleBar?VBX.select("#title1").getSize().height+10:10,c=VBX.select("#video1").getSize().height,d=controlsExist()?VBX.select("#video1 .vjs-control-bar").getSize().height:0,b=Math.max(1,Math.floor((c-a-d-10)/b));VBX.Layout.setMenuMaxItems("menu1",b);updateToolTip();menuSlidesDownFromCtaButton?(a=document.querySelector("#cta-button").offsetWidth,document.querySelector("#menu1").style.width=a.toString()+"px"):VBX.Layout.setMenuTop("menu1",a.toString()+"px")}}
function initAppsTrigger(){if(useAppsTrigger){var a=document.getElementById("appsTrigger");VBX.Layout.isState("mraid-ad")&&(a.src=a.src.replace("http://","https://"));VBX.listen(a,["click"],function(a){a=VBX.Layout.getMenuAppIdByIndex("menu1",0);VBX.Layout.selectApp(a)})}}function getMenuNumApps(a){return VBX.Layout.getMenuNumApps(a)}
function updateVideoSize(){var a=VBX.Layout.config("backgroundImage"),b=!VBX.empty(a),c=document.querySelector("#bottomLogo img").offsetHeight,c=0==c?padding.bottom:b?c:c+bottomLogoPadding.top+bottomLogoPadding.bottom,d=VBX.select("body").getSize().height,g=VBX.select("body").getSize().width,e=controlsExist()?VBX.select("#video1 .vjs-control-bar").getSize().height:0,k=edgeToEdge?0:actualTitleBarHeight,h=document.querySelector("#video1");h.style.height=d-k-c-(edgeToEdge||VBX.Layout.isState("iphone")?
0:e)+"px";h.style.width=g-padding.left-padding.right+"px";h.style.left=padding.left+"px";h.style.top=k+"px";updateYoutubeTouchTrapperSize();appsTop=showTitleBar?VBX.select("#title1").getSize().height:padding.top;e=document.querySelector("#apps1");appsWidth=g-padding.left-padding.right;menuOnBottom?(h=1<getMenuNumApps("menu1")?menuItemHeight:0,appsHeight=d-c-appsTop-h):appsHeight=d-c-appsTop;e.style.width=appsWidth+"px";e.style.height=appsHeight+"px";e.style.left=padding.left+"px";e.style.top=appsTop+
"px";resizeAppIframes();e=document.querySelector("#background");null!=e&&(e.style.height=d+"px",e.style.display=edgeToEdge?"none":"block");edgeToEdge||(b?(e.style.borderWidth="39px 5px "+c+"px 5px",e.style.borderImage='url("'+a+'") 39 5 '+c+" 5 stretch",e.style.borderImageWidth=e.style.borderWidth,VBX.supports("borderImage")||(e.style.backgroundImage=a,e.style.backgroundSize="100% 100%",e.style.padding="39px 5px "+c+"px 5px")):(e.style.borderImage=null,e.style.borderWidth=null,e.style.borderImageWidth=
null));document.querySelector("#rollPrompt").style.left=g+"px";window.hasOwnProperty("updateVideoSizeHook")&&window.updateVideoSizeHook({bodyHeight:d,videoTop:k,videoHeight:VBX.select("#video1").getSize().height})}
function hideMenu(){if(menuPeek&&!VBX.Layout.isState("apps1-item-selected"))showMenuMinimized();else if(!VBX.Layout.isState("keep-controls-visible")||VBX.Layout.isState("apps1-item-selected")||menuSlidesDownFromCtaButton)if(useAppsTrigger){var a=VBX.select("#menu1"),b=Math.ceil(a.getSize().width)+1;TweenLite.to(a.first(),AppAnimationDuration,{left:-b,ease:Cubic.easeIn});TweenLite.to(a.first(),AppAnimationDuration,{right:b,ease:Cubic.easeIn})}else if(menuSlidesDownFromCtaButton){var a=VBX.select("#menu1"),
b=Math.ceil(a.getSize().height)+1,c=document.querySelector("#title1"),c=c.offsetTop+c.offsetHeight,d=document.querySelector("#cta-button"),d=d.offsetTop+d.offsetHeight;TweenLite.to(a.first(),.5,{top:c-d-b,ease:Cubic.easeIn,onComplete:onHideMenuComplete})}else a=VBX.select("#menu1"),b=Math.ceil(a.getSize().width)+1,TweenLite.to(a.first(),.5,{right:-b,ease:Cubic.easeIn});else gotoStage2()}
function onHideMenuComplete(){var a=document.querySelector("#cta-button");updateCtaButtonMenuContainer(a.clientHeight)}function hideAppsTrigger(){var a=VBX.select("#appsTrigger"),b=Math.ceil(a.getSize().width)+1;TweenLite.to(a.first(),.5,{left:-b,ease:Cubic.easeIn})}function resizeAppIframes(){for(var a=0;a<appIframes.length;++a)resizeAppIframe(appIframes[a])}function resizeAppIframe(a){VBX.ok(appsWidth)&&VBX.ok(appsHeight)&&(a.style.width=appsWidth+"px",a.style.height=appsHeight+"px")}
function onAppIframeCreated(a){appIframes.push(a);resizeAppIframe(a)};
